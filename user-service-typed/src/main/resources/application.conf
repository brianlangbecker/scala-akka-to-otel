akka {
  loglevel = "INFO"
  
  actor {
    provider = "local"
  }
  
  http {
    server {
      preview.enable-http2 = on
    }
  }
}

# Service configuration
http {
  interface = "0.0.0.0"
  port = 8082
}

# Notification service URL for inter-service communication
notification.service.url = "http://notification-service-typed:8083"

# Kamon configuration
kamon {
  # Turn Kamon on/off globally
  enabled = true

  environment {
    service = "user-service-typed"
  }

  trace {
    sampler = "always"
  }

  # ===== Akka Core Instrumentation =====
  instrumentation.akka {
    enabled = true
  }

  # ===== Akka HTTP Instrumentation =====
  instrumentation.akka-http {
    enabled = true
    server {
      trace-requests = true
    }
    client {
      trace-requests = true
    }
  }

  # ===== Future / Executor Instrumentation =====
  instrumentation.futures {
    enabled = true
  }

  instrumentation.executors {
    enabled = true
    filters {
      includes = [ "**" ]
    }
  }

  # ===== Context Propagation =====
  context {
    propagation {
      akka = on
    }
  }

  # ===== OpenTelemetry Export =====
  otel {
    trace {
      endpoint = "http://otel-collector:4317"
    }
  }
}